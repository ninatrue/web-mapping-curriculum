<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Display a map</title>
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <script src="https://api.mapbox.com/mapbox-gl-js/v1.7.0/mapbox-gl.js"></script>
    <script src=>'https://github.com/ninatrue/project.git'</script>
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v1.7.0/mapbox-gl.css"
      rel="stylesheet"
    />

    <!-- Add mapbox gl geocoder plugin here -->
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.2/mapbox-gl-geocoder.min.js"></script>
    <link
      rel="stylesheet"
      href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.2/mapbox-gl-geocoder.css"
      type="text/css"
    />
    <style>
      body {
        margin: 0;
        padding: 0;
      }

      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }

      #menu {
background: #fff;
position: absolute;
z-index: 1;
top: 10px;
right: 10px;
border-radius: 3px;
width: 120px;
border: 1px solid rgba(0, 0, 0, 0.4);
font-family: 'Open Sans', sans-serif;
}

      #menu a {
font-size: 13px;
color: #404040;
display: block;
margin: 0;
padding: 0;
padding: 10px;
text-decoration: none;
border-bottom: 1px solid rgba(0, 0, 0, 0.25);
text-align: center;
}
 
#menu a:last-child {
border: none;
}
 
#menu a:hover {
background-color: #f8f8f8;
color: #404040;
}
 
#menu a.active {
background-color: #3887be;
color: #ffffff;
}
 
#menu a.active:hover {
background: #3074a4;
}

.legend {
background-color: #fff;
border-radius: 3px;
bottom: 30px;
box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
padding: 10px;
position: absolute;
right: 10px;
z-index: 1;
}
 
.legend h4 {
margin: 0 0 10px;
}
 
.legend div span {
border-radius: 50%;
display: inline-block;
height: 10px;
margin-right: 5px;
width: 10px;
}

.map-overlay {
  position: absolute;
  top: 10px;
  left: 10px;
  background: rgba(255, 255, 255, 0.8);
  margin-right: 20px;
  font-family: 'Helvetica Neue', Arial;
  padding: 10px;
  overflow: auto;
  border-radius: 7px;
}

.marker {
  background-image: url('');
  background-size: cover;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  cursor: pointer;
}


    </style>

<nav id="menu"></nav>

  </head>

  <body>
    <div id="map"></div>

    <div id="legend" class="legend">
      <h4>Home Value</h4>
      <div><span style="background-color: #723122"></span>$900,000</div>
      <div><span style="background-color: #8B4225"></span>$800,000</div>
      <div><span style="background-color: #A25626"></span>$700,000</div>
      <div><span style="background-color: #B86B25"></span>$600,000</div>
      <div><span style="background-color: #CA8323"></span>$500,000</div>
      <div><span style="background-color: #DA9C20"></span>$400,000</div>
      <div><span style="background-color: #E6B71E"></span>$350,000</div>
      <div><span style="background-color: #EED322"></span>$300,000</div>
      <div><span style="background-color: #F2F12D"></span>$200,000</div>
      </div>

      <div class='map-overlay' id='features'><h2>Home Value</h2><div id='hv'><p>Hover over a neighborhood </p></div></div>

       
    <script>
      // Initialize the map
      mapboxgl.accessToken =
        "pk.eyJ1IjoiZGFuc3dpY2siLCJhIjoiY2swb2g4Z3hqMGFzYTNjbXdxc3F6dWZlaSJ9.Jo1SOIQUg0JV6HK4wEv36w";
      var map = new mapboxgl.Map({
        container: "map", // container id
        style: "mapbox://styles/mapbox/streets-v11", // stylesheet location
        center: [-97.722, 30.299], // starting position [lng, lat]
        zoom: 11 // starting zoom
      });

      //Add breweries layer

    
var brew_geojson = 'https://raw.githubusercontent.com/ninatrue/project/master/Breweries'



 map.on("load", function() {
        map.addSource("Breweries", {
          type: "geojson",
          data: brew_geojson,
          cluster: true,
          clusterMaxZoom: 15,
          clusterRadius: 50
        });
      
        map.addLayer({
id: 'clusters',
type: 'circle',
source: 'Breweries',
filter: ['has', 'point_count'],
paint: {
// Use step expressions (https://docs.mapbox.com/mapbox-gl-js/style-spec/#expressions-step)
// with three steps to implement three types of circles:
//   * Blue, 20px circles when point count is less than 100
//   * Yellow, 30px circles when point count is between 100 and 750
//   * Pink, 40px circles when point count is greater than or equal to 750
'circle-color': [
'step',
['get', 'point_count'],
'#51bbd6',
2,
'#f1f075',
3,
'#f28cb1'
],
'circle-radius': [
'step',
['get', 'point_count'],
20,
2,
30,
3,
40
]
}
});
 
map.addLayer({
id: 'cluster-count',
type: 'symbol',
source: 'Breweries',
filter: ['has', 'point_count'],
layout: {
'text-field': '{point_count_abbreviated}',
'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],
'text-size': 12
}
});
 
map.addLayer({
id: 'unclustered-point',
type: 'circle',
source: 'Breweries',
filter: ['!', ['has', 'point_count']],
paint: {
'circle-color': '#11b4da',
'circle-radius': 4,
'circle-stroke-width': 1,
'circle-stroke-color': '#fff'
}

        // map.addLayer({
        //   id: "Breweries",
        //   type: "circle",
        //   source: "Breweries",
        //   paint: {
        //     "circle-radius": 6,
        //     "circle-color": "red"
        //   }
        // });

    });
  });
      //Add farmers market's layer 
    

      
      map.on("load", function() {
        map.addSource("Markets", {
          type: "geojson",
          data: 'https://raw.githubusercontent.com/ninatrue/project/master/Markets',
        //   cluster: true,
        //   clusterMaxZoom: 4,
        //   clusterRadius: 10
        });

        map.addLayer({
          id: "Markets",
          type: "circle",
          source: "Markets",
          paint: {
            "circle-radius": 6,
            "circle-color": "dodgerblue"
          }
        });

    });

    

    //Add Neighborhoods Layer

    map.on("load", function() {
        map.addSource("Neighborhoods", {
          type: "geojson",
          data: 'https://raw.githubusercontent.com/ninatrue/project/master/updated_neighborhoods1',
        });

        map.addLayer({
          id: "Neighborhoods",
          type: "fill",
          source: "Neighborhoods",
          
         paint: {
          "fill-color": ["interpolate",["linear"],["get","HousingPri"],
          0,
          '#F2F12D',
300000,
'#EED322',
350000,
'#E6B71E',
400000,
'#DA9C20',
500000,
'#CA8323',
600000,
'#B86B25',
700000,
'#A25626',
800000,
'#8B4225',
900000,
'#723122'],
          "fill-opacity": 0.4

} 
          }
        );
      });



      
      
      map.on('mousemove', function(e) {
  var prices = map.queryRenderedFeatures(e.point, {
    layers: ['Neighborhoods']
  });

  if (prices.length > 0) {
    document.getElementById('hv').innerHTML = '<h3><strong>' + prices[0].properties.name + '</strong></h3><p><strong><em>' + prices[0].properties.HousingPri + '</strong> Home Value </em></p>';
  } else {
    document.getElementById('hv').innerHTML = '<p>Hover over a neighborhood</p>';
  }
});


       

      


      //Apple Campus
      var popupApple = new mapboxgl.Popup()
        .setHTML(
          "<b>Apple Inc.</b><br /> This is where the new Apple campus will be!"
        )
        .addTo(map);
      var markerApple = new mapboxgl.Marker()
        .setLngLat([-97.767, 30.472])
        .setPopup(popupApple)
        .addTo(map);

      //This popup will show where the Austin airport is
      var popupAirport = new mapboxgl.Popup()
        .setHTML("<b>Austin Airport</b><br />")
        .addTo(map);
      var markerAirport = new mapboxgl.Marker()
        .setLngLat([-97.667, 30.196])
        .setPopup(popupAirport)
        .addTo(map);

      // Add pan and zoom controls: https://docs.mapbox.com/mapbox-gl-js/api/#map#addcontrol
      map.addControl(new mapboxgl.NavigationControl());

      // Add a search box: https://docs.mapbox.com/mapbox-gl-js/example/mapbox-gl-geocoder/
      map.addControl(
        new MapboxGeocoder({
          accessToken: mapboxgl.accessToken,
          mapboxgl: mapboxgl
        })
      );


var toggleableLayerIds = ['Breweries', 'Markets'];
 
 for (var i = 0; i < toggleableLayerIds.length; i++) {
 var id = toggleableLayerIds[i];
  
 var link = document.createElement('a');
 link.href = '#';
 link.className = 'active';
 link.textContent = id;
  
 link.onclick = function(e) {
 var clickedLayer = this.textContent;
 e.preventDefault();
 e.stopPropagation();
  
 var visibility = map.getLayoutProperty(clickedLayer, 'visibility');
  
 if (visibility === 'visible') {
 map.setLayoutProperty(clickedLayer, 'visibility', 'none');
 this.className = '';
 } else {
 this.className = 'active';
 map.setLayoutProperty(clickedLayer, 'visibility', 'visible');
 }
 };
  
 var layers = document.getElementById('menu');
 layers.appendChild(link);
 }


    </script>
  </body>
</html>
